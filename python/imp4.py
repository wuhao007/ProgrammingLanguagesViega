#!/usr/bin/python

grammar = {
            (1,'\t')  : 1  ,
            (1,'\n')  : 1  ,
            (1,' ')   : 1  ,

            (1,'#')   : 2  ,
            (2,'\n')  : 1  ,

            (1,'g')   : 3  ,
            (3,'l')   : 4  ,
            (4,'o')   : 5  ,
            (5,'b')   : 6  ,
            (6,'a')   : 7  ,
            (7,'l')   : 8  ,

            (8,'\t')  : 8  ,
            (8,'\n')  : 8  ,
            (8,' ')   : 8  ,

            (8,'#')   : 9  ,
            (9,'\n')  : 8  ,

            (8,'{')   : 10 ,

            (10,'#')  : 11 ,
            (11,'\n') : 10 ,

            (10,'\t') : 10 ,
            (10,'\n') : 10 ,
            (10,' ')  : 10 ,

            (10,'a')  : 27,
            (10,'b')  : 27,
            (10,'c')  : 27,
            (10,'d')  : 27,
            (10,'e')  : 27,
            (10,'f')  : 27,
            (10,'g')  : 27,
            (10,'h')  : 27,
            (10,'i')  : 27,
            (10,'j')  : 27,
            (10,'k')  : 27,
            (10,'l')  : 27,
            (10,'m')  : 27,
            (10,'n')  : 27,
            (10,'o')  : 27,
            (10,'p')  : 27,
            (10,'q')  : 27,
            (10,'r')  : 27,
            (10,'s')  : 27,
            (10,'t')  : 27,
            (10,'u')  : 27,
            (10,'v')  : 27,
            (10,'w')  : 27,
            (10,'x')  : 27,
            (10,'y')  : 27,
            (10,'z')  : 27,

            (10,'A')  : 27,
            (10,'B')  : 27,
            (10,'C')  : 27,
            (10,'D')  : 27,
            (10,'E')  : 27,
            (10,'F')  : 27,
            (10,'G')  : 27,
            (10,'H')  : 27,
            (10,'I')  : 27,
            (10,'J')  : 27,
            (10,'K')  : 27,
            (10,'L')  : 27,
            (10,'M')  : 27,
            (10,'N')  : 27,
            (10,'O')  : 27,
            (10,'P')  : 27,
            (10,'Q')  : 27,
            (10,'R')  : 27,
            (10,'S')  : 27,
            (10,'T')  : 27,
            (10,'U')  : 27,
            (10,'V')  : 27,
            (10,'W')  : 27,
            (10,'X')  : 27,
            (10,'Y')  : 27,
            (10,'Z')  : 27,

            (10,'_')  : 27,

            (27,'a')  : 27,
            (27,'b')  : 27,
            (27,'c')  : 27,
            (27,'d')  : 27,
            (27,'e')  : 27,
            (27,'f')  : 27,
            (27,'g')  : 27,
            (27,'h')  : 27,
            (27,'i')  : 27,
            (27,'j')  : 27,
            (27,'k')  : 27,
            (27,'l')  : 27,
            (27,'m')  : 27,
            (27,'n')  : 27,
            (27,'o')  : 27,
            (27,'p')  : 27,
            (27,'q')  : 27,
            (27,'r')  : 27,
            (27,'s')  : 27,
            (27,'t')  : 27,
            (27,'u')  : 27,
            (27,'v')  : 27,
            (27,'w')  : 27,
            (27,'x')  : 27,
            (27,'y')  : 27,
            (27,'z')  : 27,

            (27,'A')  : 27,
            (27,'B')  : 27,
            (27,'C')  : 27,
            (27,'D')  : 27,
            (27,'E')  : 27,
            (27,'F')  : 27,
            (27,'G')  : 27,
            (27,'H')  : 27,
            (27,'I')  : 27,
            (27,'J')  : 27,
            (27,'K')  : 27,
            (27,'L')  : 27,
            (27,'M')  : 27,
            (27,'N')  : 27,
            (27,'O')  : 27,
            (27,'P')  : 27,
            (27,'Q')  : 27,
            (27,'R')  : 27,
            (27,'S')  : 27,
            (27,'T')  : 27,
            (27,'U')  : 27,
            (27,'V')  : 27,
            (27,'W')  : 27,
            (27,'X')  : 27,
            (27,'Y')  : 27,
            (27,'Z')  : 27,

            (27,'0')  : 27,
            (27,'1')  : 27,
            (27,'2')  : 27,
            (27,'3')  : 27,
            (27,'4')  : 27,
            (27,'5')  : 27,
            (27,'6')  : 27,
            (27,'7')  : 27,
            (27,'8')  : 27,
            (27,'9')  : 27,

            (27,'_')  : 27,

            (27,'=')  : 29,

            (27,'\t') : 28 ,
            (27,' ')  : 28 ,

            (28,'\t') : 28 ,
            (28,' ')  : 28 ,

            (28,'=')  : 29 ,

            (29,'\t') : 29 ,
            (29,' ')  : 29 ,

            (29,'0')  : 30 ,
            (29,'1')  : 30 ,
            (29,'2')  : 30 ,
            (29,'3')  : 30 ,
            (29,'4')  : 30 ,
            (29,'5')  : 30 ,
            (29,'6')  : 30 ,
            (29,'7')  : 30 ,
            (29,'8')  : 30 ,
            (29,'9')  : 30 ,

            (29,'+')  : 30 ,
            (29,'-')  : 30 ,

            (30,'0')  : 30 ,
            (30,'1')  : 30 ,
            (30,'2')  : 30 ,
            (30,'3')  : 30 ,
            (30,'4')  : 30 ,
            (30,'5')  : 30 ,
            (30,'6')  : 30 ,
            (30,'7')  : 30 ,
            (30,'8')  : 30 ,
            (30,'9')  : 30 ,

            (30,'.')  : 33 ,

            (33,'0')  : 33 ,
            (33,'1')  : 33 ,
            (33,'2')  : 33 ,
            (33,'3')  : 33 ,
            (33,'4')  : 33 ,
            (33,'5')  : 33 ,
            (33,'6')  : 33 ,
            (33,'7')  : 33 ,
            (33,'8')  : 33 ,
            (33,'9')  : 33 ,



            (29,'a')  : 34,
            (29,'b')  : 34,
            (29,'c')  : 34,
            (29,'d')  : 34,
            (29,'e')  : 34,
            (29,'f')  : 34,
            (29,'g')  : 34,
            (29,'h')  : 34,
            (29,'i')  : 34,
            (29,'j')  : 34,
            (29,'k')  : 34,
            (29,'l')  : 34,
            (29,'m')  : 34,
            (29,'n')  : 34,
            (29,'o')  : 34,
            (29,'p')  : 34,
            (29,'q')  : 34,
            (29,'r')  : 34,
            (29,'s')  : 34,
            (29,'t')  : 34,
            (29,'u')  : 34,
            (29,'v')  : 34,
            (29,'w')  : 34,
            (29,'x')  : 34,
            (29,'y')  : 34,
            (29,'z')  : 34,

            (29,'A')  : 34,
            (29,'B')  : 34,
            (29,'C')  : 34,
            (29,'D')  : 34,
            (29,'E')  : 34,
            (29,'F')  : 34,
            (29,'G')  : 34,
            (29,'H')  : 34,
            (29,'I')  : 34,
            (29,'J')  : 34,
            (29,'K')  : 34,
            (29,'L')  : 34,
            (29,'M')  : 34,
            (29,'N')  : 34,
            (29,'O')  : 34,
            (29,'P')  : 34,
            (29,'Q')  : 34,
            (29,'R')  : 34,
            (29,'S')  : 34,
            (29,'T')  : 34,
            (29,'U')  : 34,
            (29,'V')  : 34,
            (29,'W')  : 34,
            (29,'X')  : 34,
            (29,'Y')  : 34,
            (29,'Z')  : 34,

            (29,'/')  : 34,


            (34,'a')  : 34,
            (34,'b')  : 34,
            (34,'c')  : 34,
            (34,'d')  : 34,
            (34,'e')  : 34,
            (34,'f')  : 34,
            (34,'g')  : 34,
            (34,'h')  : 34,
            (34,'i')  : 34,
            (34,'j')  : 34,
            (34,'k')  : 34,
            (34,'l')  : 34,
            (34,'m')  : 34,
            (34,'n')  : 34,
            (34,'o')  : 34,
            (34,'p')  : 34,
            (34,'q')  : 34,
            (34,'r')  : 34,
            (34,'s')  : 34,
            (34,'t')  : 34,
            (34,'u')  : 34,
            (34,'v')  : 34,
            (34,'w')  : 34,
            (34,'x')  : 34,
            (34,'y')  : 34,
            (34,'z')  : 34,

            (34,'A')  : 34,
            (34,'B')  : 34,
            (34,'C')  : 34,
            (34,'D')  : 34,
            (34,'E')  : 34,
            (34,'F')  : 34,
            (34,'G')  : 34,
            (34,'H')  : 34,
            (34,'I')  : 34,
            (34,'J')  : 34,
            (34,'K')  : 34,
            (34,'L')  : 34,
            (34,'M')  : 34,
            (34,'N')  : 34,
            (34,'O')  : 34,
            (34,'P')  : 34,
            (34,'Q')  : 34,
            (34,'R')  : 34,
            (34,'S')  : 34,
            (34,'T')  : 34,
            (34,'U')  : 34,
            (34,'V')  : 34,
            (34,'W')  : 34,
            (34,'X')  : 34,
            (34,'Y')  : 34,
            (34,'Z')  : 34,

            (34,'0')  : 34,
            (34,'1')  : 34,
            (34,'2')  : 34,
            (34,'3')  : 34,
            (34,'4')  : 34,
            (34,'5')  : 34,
            (34,'6')  : 34,
            (34,'7')  : 34,
            (34,'8')  : 34,
            (34,'9')  : 34,

            (34,'/')  : 34,
            (34,'-')  : 34,
            (34,'.')  : 34,
            (34,'_')  : 34,

            (29,'"')  : 35,
            (35,'\\') : 36,
            (35,'"')  : 37,

            (30,'\n') : 10 ,
            (30,'}')  : 12 ,
            (30,'#')  : 32 ,
            (30,'\t') : 31 ,
            (30,' ')  : 31 ,

            (33,'\n') : 10 ,
            (33,'}')  : 12 ,
            (33,'#')  : 32 ,
            (33,'\t') : 31 ,
            (33,' ')  : 31 ,

            (34,'\n') : 10 ,
            (34,'}')  : 12 ,
            (34,'#')  : 32 ,
            (34,'\t') : 31 ,
            (34,' ')  : 31 ,

            (37,'\n') : 10 ,
            (37,'}')  : 12 ,
            (37,'#')  : 32 ,
            (37,'\t') : 31 ,
            (37,' ')  : 31 ,

            (31,'\t') : 31 ,
            (31,' ')  : 31 ,
            (31,'\n') : 10 ,
            (31,'}')  : 12 ,

            (31,'#')  : 32 ,
            (32,'\n') : 10 ,

            (10,'}')  : 12 ,

            (12,'\t') : 12 ,
            (12,'\n') : 12 ,
            (12,' ')  : 12 ,

            (12,'#')  : 13 ,
            (13,'\n') : 12 ,

            (12,'h')  : 16 ,

            (12,';')  : 14 ,

            (14,'\t') : 14 ,
            (14,'\n') : 14 ,
            (14,' ')  : 14 ,

            (14,'#')  : 15 ,
            (15,'\n') : 14 ,

            (14,'h') : 16 ,
            (16,'o') : 17 ,
            (17,'s') : 18 ,
            (18,'t') : 19 ,

            (19,'\t') : 20 ,
            (19,'\n') : 20 ,
            (19,' ')  : 20 ,

            (19,'#')  : 21 ,

            (20,'\t') : 20 ,
            (20,'\n') : 20 ,
            (20,' ')  : 20 ,

            (20,'#')  : 21 ,
            (21,'\n') : 20 ,

            (20,'a')  : 22,
            (20,'b')  : 22,
            (20,'c')  : 22,
            (20,'d')  : 22,
            (20,'e')  : 22,
            (20,'f')  : 22,
            (20,'g')  : 22,
            (20,'h')  : 22,
            (20,'i')  : 22,
            (20,'j')  : 22,
            (20,'k')  : 22,
            (20,'l')  : 22,
            (20,'m')  : 22,
            (20,'n')  : 22,
            (20,'o')  : 22,
            (20,'p')  : 22,
            (20,'q')  : 22,
            (20,'r')  : 22,
            (20,'s')  : 22,
            (20,'t')  : 22,
            (20,'u')  : 22,
            (20,'v')  : 22,
            (20,'w')  : 22,
            (20,'x')  : 22,
            (20,'y')  : 22,
            (20,'z')  : 22,

            (20,'A')  : 22,
            (20,'B')  : 22,
            (20,'C')  : 22,
            (20,'D')  : 22,
            (20,'E')  : 22,
            (20,'F')  : 22,
            (20,'G')  : 22,
            (20,'H')  : 22,
            (20,'I')  : 22,
            (20,'J')  : 22,
            (20,'K')  : 22,
            (20,'L')  : 22,
            (20,'M')  : 22,
            (20,'N')  : 22,
            (20,'O')  : 22,
            (20,'P')  : 22,
            (20,'Q')  : 22,
            (20,'R')  : 22,
            (20,'S')  : 22,
            (20,'T')  : 22,
            (20,'U')  : 22,
            (20,'V')  : 22,
            (20,'W')  : 22,
            (20,'X')  : 22,
            (20,'Y')  : 22,
            (20,'Z')  : 22,

            (20,'0')  : 22,
            (20,'1')  : 22,
            (20,'2')  : 22,
            (20,'3')  : 22,
            (20,'4')  : 22,
            (20,'5')  : 22,
            (20,'6')  : 22,
            (20,'7')  : 22,
            (20,'8')  : 22,
            (20,'9')  : 22,

            (20,'.')  : 22,
            (20,'_')  : 22,
            (20,'-')  : 22,

            (22,'a')  : 22,
            (22,'b')  : 22,
            (22,'c')  : 22,
            (22,'d')  : 22,
            (22,'e')  : 22,
            (22,'f')  : 22,
            (22,'g')  : 22,
            (22,'h')  : 22,
            (22,'i')  : 22,
            (22,'j')  : 22,
            (22,'k')  : 22,
            (22,'l')  : 22,
            (22,'m')  : 22,
            (22,'n')  : 22,
            (22,'o')  : 22,
            (22,'p')  : 22,
            (22,'q')  : 22,
            (22,'r')  : 22,
            (22,'s')  : 22,
            (22,'t')  : 22,
            (22,'u')  : 22,
            (22,'v')  : 22,
            (22,'w')  : 22,
            (22,'x')  : 22,
            (22,'y')  : 22,
            (22,'z')  : 22,

            (22,'A')  : 22,
            (22,'B')  : 22,
            (22,'C')  : 22,
            (22,'D')  : 22,
            (22,'E')  : 22,
            (22,'F')  : 22,
            (22,'G')  : 22,
            (22,'H')  : 22,
            (22,'I')  : 22,
            (22,'J')  : 22,
            (22,'K')  : 22,
            (22,'L')  : 22,
            (22,'M')  : 22,
            (22,'N')  : 22,
            (22,'O')  : 22,
            (22,'P')  : 22,
            (22,'Q')  : 22,
            (22,'R')  : 22,
            (22,'S')  : 22,
            (22,'T')  : 22,
            (22,'U')  : 22,
            (22,'V')  : 22,
            (22,'W')  : 22,
            (22,'X')  : 22,
            (22,'Y')  : 22,
            (22,'Z')  : 22,

            (22,'0')  : 22,
            (22,'1')  : 22,
            (22,'2')  : 22,
            (22,'3')  : 22,
            (22,'4')  : 22,
            (22,'5')  : 22,
            (22,'6')  : 22,
            (22,'7')  : 22,
            (22,'8')  : 22,
            (22,'9')  : 22,

            (22,'\t') : 23,
            (22,'\n') : 23,
            (22,' ')  : 23,

            (22,'#')  : 24,

            (22,'{')  : 25,

            (22,'.')  : 22,
            (22,'_')  : 22,
            (22,'-')  : 22,

            (23,'\t') : 23 ,
            (23,'\n') : 23 ,
            (23,' ')  : 23 ,

            (23,'#')  : 24 ,
            (24,'\n') : 23 ,

            (23,'{')  : 25 ,

            (25,'\t') : 25 ,
            (25,'\n') : 25 ,
            (25,' ')  : 25 ,

            (25,'#')  : 26 ,
            (26,'\n') : 25 ,

            (25,'}')  : 12 ,


            (25,'a')  : 38,
            (25,'b')  : 38,
            (25,'c')  : 38,
            (25,'d')  : 38,
            (25,'e')  : 38,
            (25,'f')  : 38,
            (25,'g')  : 38,
            (25,'h')  : 38,
            (25,'i')  : 38,
            (25,'j')  : 38,
            (25,'k')  : 38,
            (25,'l')  : 38,
            (25,'m')  : 38,
            (25,'n')  : 38,
            (25,'o')  : 38,
            (25,'p')  : 38,
            (25,'q')  : 38,
            (25,'r')  : 38,
            (25,'s')  : 38,
            (25,'t')  : 38,
            (25,'u')  : 38,
            (25,'v')  : 38,
            (25,'w')  : 38,
            (25,'x')  : 38,
            (25,'y')  : 38,
            (25,'z')  : 38,

            (25,'A')  : 38,
            (25,'B')  : 38,
            (25,'C')  : 38,
            (25,'D')  : 38,
            (25,'E')  : 38,
            (25,'F')  : 38,
            (25,'G')  : 38,
            (25,'H')  : 38,
            (25,'I')  : 38,
            (25,'J')  : 38,
            (25,'K')  : 38,
            (25,'L')  : 38,
            (25,'M')  : 38,
            (25,'N')  : 38,
            (25,'O')  : 38,
            (25,'P')  : 38,
            (25,'Q')  : 38,
            (25,'R')  : 38,
            (25,'S')  : 38,
            (25,'T')  : 38,
            (25,'U')  : 38,
            (25,'V')  : 38,
            (25,'W')  : 38,
            (25,'X')  : 38,
            (25,'Y')  : 38,
            (25,'Z')  : 38,

            (25,'_')  : 38,


            (38,'a')  : 38,
            (38,'b')  : 38,
            (38,'c')  : 38,
            (38,'d')  : 38,
            (38,'e')  : 38,
            (38,'f')  : 38,
            (38,'g')  : 38,
            (38,'h')  : 38,
            (38,'i')  : 38,
            (38,'j')  : 38,
            (38,'k')  : 38,
            (38,'l')  : 38,
            (38,'m')  : 38,
            (38,'n')  : 38,
            (38,'o')  : 38,
            (38,'p')  : 38,
            (38,'q')  : 38,
            (38,'r')  : 38,
            (38,'s')  : 38,
            (38,'t')  : 38,
            (38,'u')  : 38,
            (38,'v')  : 38,
            (38,'w')  : 38,
            (38,'x')  : 38,
            (38,'y')  : 38,
            (38,'z')  : 38,

            (38,'A')  : 38,
            (38,'B')  : 38,
            (38,'C')  : 38,
            (38,'D')  : 38,
            (38,'E')  : 38,
            (38,'F')  : 38,
            (38,'G')  : 38,
            (38,'H')  : 38,
            (38,'I')  : 38,
            (38,'J')  : 38,
            (38,'K')  : 38,
            (38,'L')  : 38,
            (38,'M')  : 38,
            (38,'N')  : 38,
            (38,'O')  : 38,
            (38,'P')  : 38,
            (38,'Q')  : 38,
            (38,'R')  : 38,
            (38,'S')  : 38,
            (38,'T')  : 38,
            (38,'U')  : 38,
            (38,'V')  : 38,
            (38,'W')  : 38,
            (38,'X')  : 38,
            (38,'Y')  : 38,
            (38,'Z')  : 38,

            (38,'0')  : 38,
            (38,'1')  : 38,
            (38,'2')  : 38,
            (38,'3')  : 38,
            (38,'4')  : 38,
            (38,'5')  : 38,
            (38,'6')  : 38,
            (38,'7')  : 38,
            (38,'8')  : 38,
            (38,'9')  : 38,

            (38,'_')  : 38,

            (38,'=')  : 40,

            (38,'\t') : 39 ,
            (38,' ')  : 39 ,

            (39,'\t') : 39 ,
            (39,' ')  : 39 ,

            (39,'=')  : 40 ,

            (40,'\t') : 40 ,
            (40,' ')  : 40 ,

            (40,'0')  : 41 ,
            (40,'1')  : 41 ,
            (40,'2')  : 41 ,
            (40,'3')  : 41 ,
            (40,'4')  : 41 ,
            (40,'5')  : 41 ,
            (40,'6')  : 41 ,
            (40,'7')  : 41 ,
            (40,'8')  : 41 ,
            (40,'9')  : 41 ,

            (40,'+')  : 41 ,
            (40,'-')  : 41 ,

            (41,'0')  : 41 ,
            (41,'1')  : 41 ,
            (41,'2')  : 41 ,
            (41,'3')  : 41 ,
            (41,'4')  : 41 ,
            (41,'5')  : 41 ,
            (41,'6')  : 41 ,
            (41,'7')  : 41 ,
            (41,'8')  : 41 ,
            (41,'9')  : 41 ,

            (41,'.')  : 44 ,

            (44,'0')  : 44 ,
            (44,'1')  : 44 ,
            (44,'2')  : 44 ,
            (44,'3')  : 44 ,
            (44,'4')  : 44 ,
            (44,'5')  : 44 ,
            (44,'6')  : 44 ,
            (44,'7')  : 44 ,
            (44,'8')  : 44 ,
            (44,'9')  : 44 ,



            (40,'a')  : 45,
            (40,'b')  : 45,
            (40,'c')  : 45,
            (40,'d')  : 45,
            (40,'e')  : 45,
            (40,'f')  : 45,
            (40,'g')  : 45,
            (40,'h')  : 45,
            (40,'i')  : 45,
            (40,'j')  : 45,
            (40,'k')  : 45,
            (40,'l')  : 45,
            (40,'m')  : 45,
            (40,'n')  : 45,
            (40,'o')  : 45,
            (40,'p')  : 45,
            (40,'q')  : 45,
            (40,'r')  : 45,
            (40,'s')  : 45,
            (40,'t')  : 45,
            (40,'u')  : 45,
            (40,'v')  : 45,
            (40,'w')  : 45,
            (40,'x')  : 45,
            (40,'y')  : 45,
            (40,'z')  : 45,

            (40,'A')  : 45,
            (40,'B')  : 45,
            (40,'C')  : 45,
            (40,'D')  : 45,
            (40,'E')  : 45,
            (40,'F')  : 45,
            (40,'G')  : 45,
            (40,'H')  : 45,
            (40,'I')  : 45,
            (40,'J')  : 45,
            (40,'K')  : 45,
            (40,'L')  : 45,
            (40,'M')  : 45,
            (40,'N')  : 45,
            (40,'O')  : 45,
            (40,'P')  : 45,
            (40,'Q')  : 45,
            (40,'R')  : 45,
            (40,'S')  : 45,
            (40,'T')  : 45,
            (40,'U')  : 45,
            (40,'V')  : 45,
            (40,'W')  : 45,
            (40,'X')  : 45,
            (40,'Y')  : 45,
            (40,'Z')  : 45,

            (40,'/')  : 45,


            (45,'a')  : 45,
            (45,'b')  : 45,
            (45,'c')  : 45,
            (45,'d')  : 45,
            (45,'e')  : 45,
            (45,'f')  : 45,
            (45,'g')  : 45,
            (45,'h')  : 45,
            (45,'i')  : 45,
            (45,'j')  : 45,
            (45,'k')  : 45,
            (45,'l')  : 45,
            (45,'m')  : 45,
            (45,'n')  : 45,
            (45,'o')  : 45,
            (45,'p')  : 45,
            (45,'q')  : 45,
            (45,'r')  : 45,
            (45,'s')  : 45,
            (45,'t')  : 45,
            (45,'u')  : 45,
            (45,'v')  : 45,
            (45,'w')  : 45,
            (45,'x')  : 45,
            (45,'y')  : 45,
            (45,'z')  : 45,

            (45,'A')  : 45,
            (45,'B')  : 45,
            (45,'C')  : 45,
            (45,'D')  : 45,
            (45,'E')  : 45,
            (45,'F')  : 45,
            (45,'G')  : 45,
            (45,'H')  : 45,
            (45,'I')  : 45,
            (45,'J')  : 45,
            (45,'K')  : 45,
            (45,'L')  : 45,
            (45,'M')  : 45,
            (45,'N')  : 45,
            (45,'O')  : 45,
            (45,'P')  : 45,
            (45,'Q')  : 45,
            (45,'R')  : 45,
            (45,'S')  : 45,
            (45,'T')  : 45,
            (45,'U')  : 45,
            (45,'V')  : 45,
            (45,'W')  : 45,
            (45,'X')  : 45,
            (45,'Y')  : 45,
            (45,'Z')  : 45,

            (45,'0')  : 45,
            (45,'1')  : 45,
            (45,'2')  : 45,
            (45,'3')  : 45,
            (45,'4')  : 45,
            (45,'5')  : 45,
            (45,'6')  : 45,
            (45,'7')  : 45,
            (45,'8')  : 45,
            (45,'9')  : 45,

            (45,'/')  : 45,
            (45,'-')  : 45,
            (45,'.')  : 45,
            (45,'_')  : 45,

            (40,'"')  : 46,
            (46,'\\') : 47,
            (46,'"')  : 48,

            (41,'\n') : 25 ,
            (41,'}')  : 12 ,
            (41,'#')  : 43 ,
            (41,'\t') : 42 ,
            (41,' ')  : 42 ,

            (44,'\n') : 25 ,
            (44,'}')  : 12 ,
            (44,'#')  : 43 ,
            (44,'\t') : 42 ,
            (44,' ')  : 42 ,

            (45,'\n') : 25 ,
            (45,'}')  : 12 ,
            (45,'#')  : 43 ,
            (45,'\t') : 42 ,
            (45,' ')  : 42 ,

            (48,'\n') : 25 ,
            (48,'}')  : 12 ,
            (48,'#')  : 43 ,
            (48,'\t') : 42 ,
            (48,' ')  : 42 ,

            (42,'\t') : 42 ,
            (42,' ')  : 42 ,
            (42,'\n') : 25 ,
            (42,'}')  : 12 ,

            (42,'#')  : 43 ,
            (43,'\n') : 25 ,


}

comment = [2,9,11,13,15,21,24,26,32,43]
global_quoted_list = [35,36]
host_quoted_list = [46,47]
hosts = []
host_content = {}
host_tree = {}
global_keys = []
global_set = set([])
host_set = set([])
global_content = {}
line = 1
state = 1
display_flag = False

def escapde_quotestr(quotedstr):
  escapedstr = ''
  i = 0
  while (i < len(quotedstr)):
    if (quotedstr[i] == '\\'):
      if (quotedstr[i+1] == 'n'):
        escapedstr += '\n'
        i += 1
      elif (quotedstr[i+1] == 'r'):
        escapedstr += '\r'
        i += 1
      elif (quotedstr[i+1] == '\\'):
        escapedstr += '\\'
        i += 1
    else:
      escapedstr += quotedstr[i]
    i += 1
  return escapedstr

def display():
  if state >= 12:
    print 'GLOBAL:'
    for globalkey in global_keys:
      print globalkey + ':' + global_content[globalkey]
  for hostname in hosts:
    print 'HOST ' + hostname + ':'
    for hostkey in host_content[hostname]:
      print hostkey + ':' + host_tree[hostname][hostkey]

with open('test.cfg', 'r') as fin:
  cfg = fin.read()
  host_name = ''
  global_key = ''
  host_key = ''
  global_int = ''
  host_int = ''
  global_float = ''
  host_float = ''
  global_str = ''
  host_str = ''
  global_quoted_str = ''
  host_quoted_str = ''
  for char_num in range(len(cfg)):
    charactor = cfg[char_num]
    old_state = state
    #print state, charactor
    if (state, charactor) in grammar:
      state = grammar[(state, charactor)]
      if old_state == 20 and state == 22:
        host_name = charactor
      elif state == 22:
        host_name += charactor

      if old_state == 10 and state == 27: 
        global_key = charactor
      elif state == 27:
        global_key += charactor

      if old_state == 25 and state == 38: 
        host_key = charactor
      elif state == 38:
        host_key += charactor

      if old_state == 29 and state == 30: 
        global_int = charactor
      elif state == 30:
        global_int += charactor

      if old_state == 40 and state == 41: 
        host_int = charactor
      elif state == 41:
        host_int += charactor

      if old_state == 30 and state == 33: 
        global_float = global_int + charactor
        global_int = ''
      elif state == 33:
        global_float += charactor

      if old_state == 41 and state == 44: 
        host_float = host_int + charactor
        host_int = ''
      elif state == 44:
        host_float += charactor

      if old_state == 29 and state == 34: 
        global_str = charactor
      elif state == 34:
        global_str += charactor

      if old_state == 40 and state == 45: 
        host_str = charactor
      elif state == 45:
        host_str += charactor

      if old_state == 29 and state == 35: 
        global_quoted_str = charactor
      elif state in global_quoted_list:
        global_quoted_str += charactor

      if old_state == 40 and state == 46: 
        host_quoted_str = charactor
      elif state in host_quoted_list:
        host_quoted_str += charactor

      if old_state < 25 and state == 25:
        host_content[host_name] = []
        hosts += [host_name]

      if (old_state > 26 and old_state < 38) and (state == 10 or state == 12):

        O = ''
        if global_key in global_set:
          O = 'O'
        else:
          global_set.add(global_key)

        if global_int != '':
          global_key = '    I:' + O + ':' + global_key
          global_content[global_key] = global_int
          global_keys += [global_key]
          global_int = ''

        if global_float != '':
          global_key = '    F:' + O + ':' + global_key
          global_content[global_key] = global_float
          global_keys += [global_key]
          global_float = ''

        if global_str != '':
          global_key = '    S:' + O + ':' + global_key
          global_content[global_key] = global_str
          global_keys += [global_key]
          global_str = ''

        if global_quoted_str != '':
          global_key = '    Q:' + O + ':' + global_key
          global_content[global_key] = '""' + escapde_quotestr(global_quoted_str) + '"""'
          global_keys += [global_key]
          global_quoted_str = ''

        #if state == 12:
        #  print 'GLOBAL:'
        #  for globalkey in global_keys:
        #    print globalkey + ':' + global_content[globalkey]


      if (old_state > 37 and old_state < 49) and (state == 25 or state == 12):

        if host_name not in host_tree:
          host_tree[host_name] = {}

        O = ''
        if host_key in global_set:
          O = 'O'

        if host_key in host_set:
          O = 'O'
        else:
          host_set.add(host_key)

        if host_int != '':
          host_key = '    I:' + O + ':' + host_key
          host_content[host_name] += [host_key]
          host_tree[host_name][host_key] = host_int
          host_int = ''

        if host_float != '':
          host_key = '    F:' + O + ':' + host_key
          host_content[host_name] += [host_key]
          host_tree[host_name][host_key] = host_float
          host_float = ''

        if host_str != '':
          host_key = '    S:' + O + ':' + host_key
          host_content[host_name] += [host_key]
          host_tree[host_name][host_key] = host_str
          host_str = ''

        if host_quoted_str != '':
          host_key = '    Q:' + O + ':' + host_key
          host_content[host_name] += [host_key]
          host_tree[host_name][host_key] = '""' + escapde_quotestr(host_quoted_str) + '"""'
          host_quoted_str = ''

      if state == 12:
        host_set.clear()
        #if state == 12:
        #  for hostname in hosts:
        #    print 'HOST ' + hostname + ':'
        #    for hostkey in host_content[hostname]:
        #      print hostkey + ':' + host_tree[hostname][hostkey]
        #  hosts.clear()

    elif state in comment:
      continue
    elif state in global_quoted_list:
      if state == 36:
        state = 35
      if charactor == '\n':
        print 'ERR:L:'+str(line)
        state = 0
        break
      global_quoted_str += charactor
      continue
    elif state in host_quoted_list:
      if state == 47:
        state = 46
      if charactor == '\n':
        display_flag = True
        hosts.remove(host_name)
        display()
        print 'ERR:L:'+str(line)
        state = 0
        break
      host_quoted_str += charactor
      continue
    else:
      display_flag = True
      if (old_state > 26 and old_state < 38):
        print 'ERR:P:'+str(line)
        state = 0
        break
      if (state > 22 and state <= 26) or (old_state > 37 and old_state < 49):
        hosts.remove(host_name)
      display()
      print 'ERR:P:'+str(line)
      state = 0
      break

    if charactor == '\n' and (char_num != len(cfg) - 1):
      line += 1

if display_flag == False:
  if state in [12, 14]:
    print 'GLOBAL:'
    for globalkey in global_keys:
      print globalkey + ':' + global_content[globalkey]
    for hostname in hosts:
      print 'HOST ' + hostname + ':'
      for hostkey in host_content[hostname]:
        print hostkey + ':' + host_tree[hostname][hostkey]
  else:
    if (old_state > 26 and old_state < 38):
      print 'ERR:P:'+str(line)
    elif (state > 22 and state <= 26) or (old_state > 37 and old_state < 49):
      hosts.remove(host_name)
    display()
    print 'ERR:P:'+str(line)
